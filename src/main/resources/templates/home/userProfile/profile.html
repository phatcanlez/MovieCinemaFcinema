<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Thông tin cá nhân - Quản lý hồ sơ tài khoản CinemaMax"
    />
    <meta
      name="keywords"
      content="thông tin cá nhân, hồ sơ, CinemaMax, tài khoản"
    />
    <title>Thông Tin Cá Nhân - FCine</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" th:href="@{/images/favicon.png}" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&family=Cinzel:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap and Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/variables.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/components.css}" />
    <link rel="stylesheet" th:href="@{/css/responsive.css}" />
    <link rel="stylesheet" th:href="@{/css/home/header.css}" />
    <link rel="stylesheet" th:href="@{/css/profile.css}" />
  </head>

  <body>
    <!-- Header -->
    <div th:replace="~{homeLayout/header :: header}"></div>

    <!-- Main Content -->
    <div class="d-flex justify-content-center">
      <div
        class="main-content p-4"
        style="margin-top: 80px; max-width: 1200px; width: 100%"
      >
        <!-- Alert Messages -->
        <div th:if="${successMessage}" class="alert alert-success" role="alert">
          <i class="bi bi-check-circle-fill" aria-hidden="true"></i>
          <span th:text="${successMessage}"></span>
        </div>

        <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
          <i class="bi bi-exclamation-triangle-fill" aria-hidden="true"></i>
          <span th:text="${errorMessage}"></span>
        </div>

        <!-- Page Header -->
        <div class="header" style="margin-top: 40px">
          <h1 id="page-title">Thông Tin Cá Nhân</h1>
        </div>

        <!-- Profile Section -->
        <div
          id="profile"
          class="content-section active"
          style="margin-top: 60px"
        >
          <div class="form-container">
            <!-- Profile Header -->
            <div class="text-center mb-4">
              <div
                class="profile-avatar-container"
                style="
                  position: relative;
                  display: inline-block;
                  margin-bottom: 1.5rem;
                "
              >
                <div
                  class="profile-avatar"
                  style="
                    width: 120px;
                    height: 120px;
                    border-radius: 50%;
                    background: linear-gradient(
                      135deg,
                      var(--primary-red),
                      var(--dark-red)
                    );
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin: 0 auto;
                    box-shadow: 0 8px 25px rgba(229, 9, 20, 0.4);
                    border: 4px solid rgba(255, 255, 255, 0.1);
                  "
                >
                  <img
                    th:if="${account.image != null}"
                    th:src="${account.image}"
                    alt="Avatar"
                    style="
                      width: 100%;
                      height: 100%;
                      border-radius: 50%;
                      object-fit: cover;
                      position: absolute;
                      top: 0;
                      left: 0;
                    "
                  />
                </div>
                <div
                  class="profile-status"
                  style="
                    position: absolute;
                    bottom: 10px;
                    right: 10px;
                    width: 24px;
                    height: 24px;
                    background: var(--success-green);
                    border-radius: 50%;
                    border: 3px solid var(--dark-gray);
                  "
                ></div>
              </div>
              <h3
                style="
                  color: var(--white);
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                "
                th:text="${account.fullName}"
              >
                Tên người dùng
              </h3>
              <p
                style="color: var(--text-secondary); margin-bottom: 0"
                th:text="${account.email}"
              >
                email@example.com
              </p>
            </div>

            <!-- Profile Form -->
            <form
              class="profile-form"
              th:action="@{/customer/profile/update}"
              method="post"
              enctype="multipart/form-data"
            >
              <input
                type="hidden"
                name="accountId"
                th:value="${account.accountId}"
              />

              <div class="form-grid">
                <!-- Full Name -->
                <div class="form-group">
                  <label class="form-label">
                    <i
                      class="bi bi-person-fill"
                      style="color: var(--primary-red)"
                    ></i>
                    Họ và Tên
                  </label>
                  <input
                    type="text"
                    class="form-input"
                    th:value="${account.fullName}"
                    id="fullName"
                    name="fullName"
                    placeholder="Nhập họ và tên đầy đủ"
                    readonly
                  />
                </div>

                <!-- Email -->
                <div class="form-group">
                  <label class="form-label">
                    <i
                      class="bi bi-envelope-fill"
                      style="color: var(--primary-red)"
                    ></i>
                    Email
                  </label>
                  <input
                    type="email"
                    class="form-input"
                    th:value="${account.email}"
                    id="email"
                    name="email"
                    placeholder="email@example.com"
                    readonly
                  />
                </div>

                <!-- Phone Number -->
                <div class="form-group">
                  <label class="form-label">
                    <i
                      class="bi bi-telephone-fill"
                      style="color: var(--primary-red)"
                    ></i>
                    Số Điện Thoại
                  </label>
                  <input
                    type="tel"
                    class="form-input"
                    th:value="${account.phoneNumber}"
                    id="phone"
                    name="phoneNumber"
                    placeholder="Nhập số điện thoại"
                    readonly
                  />
                </div>

                <!-- Identity Card -->
                <div class="form-group">
                  <label class="form-label">
                    <i
                      class="bi bi-card-text"
                      style="color: var(--primary-red)"
                    ></i>
                    CMND/CCCD
                  </label>
                  <input
                    type="text"
                    class="form-input"
                    th:value="${account.identityCard}"
                    id="identityCard"
                    name="identityCard"
                    placeholder="Nhập số CMND/CCCD"
                    readonly
                  />
                </div>

                <!-- Date of Birth -->
                <div class="form-group">
                  <label class="form-label">
                    <i
                      class="bi bi-calendar-fill"
                      style="color: var(--primary-red)"
                    ></i>
                    Ngày sinh
                  </label>
                  <input
                    type="date"
                    class="form-input"
                    th:value="${account.dateOfBirth}"
                    id="birthDate"
                    name="dateOfBirth"
                    readonly
                  />
                </div>

                <!-- Gender -->
                <div class="form-group">
                  <label class="form-label">
                    <i
                      class="bi bi-gender-ambiguous"
                      style="color: var(--primary-red)"
                    ></i>
                    Giới Tính
                  </label>
                  <select
                    class="form-input"
                    id="gender"
                    name="gender"
                    disabled
                    th:disabled="${true}"
                  >
                    <option
                      value="Nam"
                      th:selected="${account.gender == 'Nam'}"
                    >
                      Nam
                    </option>
                    <option value="Nữ" th:selected="${account.gender == 'Nữ'}">
                      Nữ
                    </option>
                  </select>
                </div>

                <!-- Address -->
                <div class="form-group">
                  <label class="form-label">
                    <i
                      class="bi bi-geo-alt-fill"
                      style="color: var(--primary-red)"
                    ></i>
                    Địa Chỉ
                  </label>
                  <input
                    type="text"
                    class="form-input"
                    th:value="${account.address}"
                    id="address"
                    name="address"
                    placeholder="Nhập địa chỉ của bạn"
                    readonly
                  />
                </div>

                <!-- Points -->
                <div class="form-group">
                  <label class="form-label">
                    <i class="bi bi-star-fill" style="color: var(--gold)"></i>
                    Điểm tích lũy
                  </label>
                  <div style="position: relative">
                    <input
                      type="number"
                      class="form-input"
                      th:value="${account.points}"
                      id="points"
                      name="points"
                      readonly
                      disabled
                      style="
                        background: linear-gradient(
                          135deg,
                          rgba(255, 215, 0, 0.1),
                          rgba(184, 134, 11, 0.1)
                        );
                        border-color: var(--gold);
                        cursor: not-allowed;
                      "
                    />
                    <span
                      style="
                        position: absolute;
                        right: 20px;
                        top: 50%;
                        transform: translateY(-50%);
                        color: var(--gold);
                        font-weight: 600;
                      "
                      >pts</span
                    >
                  </div>
                </div>

                <!-- Avatar Upload -->
                <div class="form-group">
                  <label for="imageFile" class="form-label">
                    <i
                      class="bi bi-image-fill"
                      style="color: var(--primary-red)"
                    ></i>
                    Avatar
                  </label>
                  <input
                    type="file"
                    class="form-control"
                    id="imageFile"
                    name="image"
                    accept="image/*"
                    th:disabled="${true}"
                  />
                  <small class="form-text text-muted mt-2">
                    <i class="bi bi-info-circle"></i>
                    Chọn ảnh định dạng JPG, PNG hoặc GIF (tối đa 5MB)
                  </small>
                </div>
              </div>

              <!-- Form Actions -->
              <div class="form-actions">
                <button
                  onclick="changeType(this)"
                  class="btn btn-danger"
                  id="edit"
                  type="button"
                >
                  <i class="bi bi-pencil-square"></i>
                  Cập Nhật Thông Tin
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div th:replace="~{homeLayout/footer :: footer}"></div>

    <!-- Scripts -->
    <script th:src="@{/js/profile.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>

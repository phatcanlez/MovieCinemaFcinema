<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title th:text="${movie.movieNameVn} + ' - FCine'"></title>
  <link rel="icon" href="https://res.cloudinary.com/thaidev/image/upload/v1752116653/favicon_ij2fnu.png"
    type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
  <link rel="stylesheet" th:href="@{/css/variables.css}" />
  <link rel="stylesheet" th:href="@{/css/components.css}" />
  <link rel="stylesheet" th:href="@{/css/movie-detail.css}" />
</head>

<body>
  <div th:attr="data-movie-id=${movie.movieId}"></div>
  <div th:replace="~{homeLayout/header :: header}"></div>

  <div class="container" style="margin-top: 85px">
    <!-- Movie Banner -->
    <div class="movie-banner">
      <img th:src="${movie.largeImage}" th:alt="${movie.movieNameVn}" class="banner-image" />
      <div class="banner-overlay"></div>
      <div class="banner-content">

        <div class="banner-quick-info">
          <span class="quick-info-item"
            th:text="'‚≠ê ' + ${movie.rating != null ? movie.rating + '/10' : 'Ch∆∞a ƒë√°nh gi√°'}">ƒê√°nh gi√°</span>
          <span class="quick-info-item" th:text="'üé¨ ' + ${#strings.listJoin(movie.types, ', ')}">Th·ªÉ lo·∫°i</span>
          <span class="quick-info-item" th:text="'‚è±Ô∏è ' + ${movie.duration} + ' ph√∫t'">Th·ªùi l∆∞·ª£ng</span>
          <span class="quick-info-item" th:text="'üìÖ ' + ${#strings.substring(movie.fromDate, 0, 4)}">NƒÉm s·∫£n
            xu·∫•t</span>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="movie-content">
      <!-- Poster Section -->
      <div class="poster-section">
        <div class="rating-badge" th:text="${movie.rating != null ? movie.rating + '‚òÖ' : 'N/A'}">
          ƒê√°nh gi√°
        </div>
        <img th:src="${movie.smallImage != null ? movie.smallImage : movie.largeImage}" th:alt="${movie.movieNameVn}"
          class="movie-poster1" />
      </div>

      <!-- Movie Info -->
      <div class="movie-info">
        <div class="movie-titles">
          <h1 class="movie-title-eng"
            th:text="${movie.movieNameEnglish != null ? movie.movieNameEnglish : movie.movieNameVn}">
            T√™n phim ti·∫øng Anh
          </h1>
          <h2 class="movie-title-vie" th:text="${movie.movieNameVn}">
            T√™n phim ti·∫øng Vi·ªát
          </h2>
        </div>

        <div class="info-grid">
          <div class="info-item loading">
            <div class="info-label">üé≠ Th·ªÉ lo·∫°i</div>
            <div class="info-value" th:text="${#strings.listJoin(movie.types, ', ')}">
              Th·ªÉ lo·∫°i phim
            </div>
          </div>

          <div class="info-item loading">
            <div class="info-label">üé¨ ƒê·∫°o di·ªÖn</div>
            <div class="info-value" th:text="${movie.director != null ? movie.director : 'Ch∆∞a c√≥ th√¥ng tin'}">
              ƒê·∫°o di·ªÖn
            </div>
          </div>

          <div class="info-item loading">
            <div class="info-label">üåü Di·ªÖn vi√™n ch√≠nh</div>
            <div class="info-value" th:text="${movie.actor != null ? movie.actor : 'Ch∆∞a c√≥ th√¥ng tin'}">
              Di·ªÖn vi√™n
            </div>
          </div>

          <div class="info-item loading">
            <div class="info-label">‚è±Ô∏è Th·ªùi l∆∞·ª£ng</div>
            <div class="info-value" th:text="${movie.duration != null ? movie.duration + ' ph√∫t' : 'Ch∆∞a x√°c ƒë·ªãnh'}">
              Th·ªùi l∆∞·ª£ng
            </div>
          </div>

          <div class="info-item loading">
            <div class="info-label">üè¢ C√¥ng ty s·∫£n xu·∫•t</div>
            <div class="info-value"
              th:text="${movie.movieProductionCompany != null ? movie.movieProductionCompany : 'Ch∆∞a c√≥ th√¥ng tin'}">
              C√¥ng ty s·∫£n xu·∫•t
            </div>
          </div>

          <div class="info-item loading">
            <div class="info-label">üìÖ Ng√†y ph√°t h√†nh</div>
            <div class="info-value" th:text="${movie.fromDate != null ? movie.fromDate : 'Ch∆∞a x√°c ƒë·ªãnh'}">
              Ng√†y ph√°t h√†nh
            </div>
          </div>
        </div>

        <div class="synopsis-section loading">
          <h3 class="synopsis-title">üìñ N·ªôi dung phim</h3>
          <p class="synopsis-text"
            th:text="${movie.content != null ? movie.content : 'Ch∆∞a c√≥ th√¥ng tin n·ªôi dung phim.'}">
            N·ªôi dung phim
          </p>
        </div>

        <div class="action-buttons">
          <button th:if="${movie.status == 'SHOWING'}" class="btn btn-primary" th:data-movie-id="${movie.movieId}"
            th:data-movie-name="${movie.movieNameVn}" th:data-price="${movie.price != null ? movie.price : 50000}"
            onclick="openBookingModal(this)">
            <i class="bi bi-ticket-detailed"></i> ƒê·∫∑t V√© Ngay
          </button>
          <button class="btn btn-secondary" th:data-movie-name="${movie.movieNameVn}"
            th:data-trailer-id="${movie.trailerId != null ? movie.trailerId : 'dQw4w9WgXcQ'}"
            onclick="openTrailerFromButton(this)">
            <i class="bi bi-play-btn"></i> Trailer
          </button>
        </div>
      </div>
    </div>
  </div>

  <div th:replace="~{home/booking-detail :: modelBooking}"></div>

  <!-- Modal Trailer -->
  <div id="trailerModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title">Trailer</h2>
        <span class="close" onclick="closeTrailer()">&times;</span>
      </div>
      <div class="video-container">
        <iframe id="trailerFrame" src="" allowfullscreen></iframe>
      </div>
    </div>
  </div>

  <div th:replace="~{homeLayout/footer :: footer}"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script th:src="@{/js/movie-detail.js}"></script>
  <script th:src="@{/js/booking-detail.js}"></script>
  <script></script>
</body>

</html>